/*******************************************************************************
 * ScriptTrigger generated by Eliot.UELib using UE Explorer.exe.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class ScriptTrigger extends Triggers
    native
    collapsecategories
    hidecategories(Filter,Interactivity,Karma,Lighting,Networking,Sound);

var() noexport ScriptObj Script "When this trigger is triggered, the first AI with a tag matching Event will play this script.  If Event is null, the AIActor triggering this trigger will play the script.";
var() noexport bool PushScript "Push any existing script (ie continue playing it after this script finishes).";
var() noexport bool DebugScriptTrigger "If true we will broadcast debug messages when this is triggered.";

function Trigger(Actor Other, Pawn EventInstigator)
{
    local AIActor MyActor;

    // End:0x125
    if(DebugScriptTrigger)
    {
        BroadcastLog(__NFUN_302__(__NFUN_302__(__NFUN_302__(__NFUN_302__(__NFUN_302__(__NFUN_302__(__NFUN_302__(__NFUN_302__("(", string(Name)), ", "), string(Level.GameTimeSeconds)), ") -- ScriptTrigger::Trigger ("), string(Other)), ", "), string(EventInstigator)), ")"));
        BroadcastLog(__NFUN_302__(__NFUN_302__(__NFUN_302__(__NFUN_302__(__NFUN_302__("(", string(Name)), ", "), string(Level.GameTimeSeconds)), ")   -- Script:          "), string(Script.Name)));
        BroadcastLog(__NFUN_302__(__NFUN_302__(__NFUN_302__(__NFUN_302__(__NFUN_302__("(", string(Name)), ", "), string(Level.GameTimeSeconds)), ")   -- PushScript:      "), string(PushScript)));
    }
    // End:0x23D
    if(__NFUN_342__(Event, 'None'))
    {
        // End:0x190
        if(DebugScriptTrigger)
        {
            BroadcastLog(__NFUN_302__(__NFUN_302__(__NFUN_302__(__NFUN_302__(__NFUN_302__("(", string(Name)), ", "), string(Level.GameTimeSeconds)), ")   -- Event:           "), string(Event)));
        }
        // End:0x812E
        foreach __NFUN_747__(class'AIActor', MyActor, Event)
        {
            /* Statement decompilation error: Object reference not set to an instance of an object.
                
            */

            /*@Error*/
            /* Statement decompilation error: Object reference not set to an instance of an object.
                
            */

            /*@Error*/
            /* Statement decompilation error: Object reference not set to an instance of an object.
                
            */

            /*@Error*/
            false
            acGeneric_Combat
             == ", ";
            string(Level.GameTimeSeconds)            
            ")   -- Actor:           "            
            string(MyActor.Name)                        
            MyActor.PlayScript(Script, PushScript);
            MyActor.LastScriptTrigger = self;                        
            return;
            goto J0x332;
            MyActor = AIActor(EventInstigator);
        }/* !MISMATCHING REMOVE, tried If got Type:ForEach Position:0x190! */
        // End:0x2FA
        if(DebugScriptTrigger)
        {
            BroadcastLog(__NFUN_302__(__NFUN_302__(__NFUN_302__(__NFUN_302__(__NFUN_302__("(", string(Name)), ", "), string(Level.GameTimeSeconds)), ")   -- EventInstigator: "), string(EventInstigator)));
            BroadcastLog(__NFUN_302__(__NFUN_302__(__NFUN_302__(__NFUN_302__(__NFUN_302__("(", string(Name)), ", "), string(Level.GameTimeSeconds)), ")   -- MyActor:         "), string(MyActor)));
            /* Statement decompilation error: Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index
                
            */

            // End:0x332
            /*@Error*/
        }
        MyActor.PlayScript(Script, PushScript);
        MyActor.LastScriptTrigger = self;
        return;
        @NULL
        GotoXParms
    }/* !MISMATCHING REMOVE, tried ForEach got Type:If Position:0x125! */
}

event EnumerateRawAnimationSequences(out array<SAnimationEnumeration> References)
{
    local AIActor AI;
    local Mesh AIMesh;

    super(Actor).EnumerateRawAnimationSequences(References);
    // End:0x75
    if(__NFUN_340__(Script, none))
    {
        // End:0x5A
        foreach __NFUN_747__(class'AIActor', AI)
        {
            // End:0x59
            if(__NFUN_341__(AI.Tag, Event))
            {
                AIMesh = AI.Mesh;
                // End:0x5A
                break;
            }            
        }        
        Script.super(ScriptObj).EnumerateRawAnimationSequences(References, AIMesh);
    }
    return;
}

event RegisterPrecacheComponents(PrecacheIndex PrecacheIndex)
{
    local bool bFound;
    local AIActor AI;

    // End:0x5A
    if(__NFUN_340__(Script, none))
    {
        // End:0x59
        foreach __NFUN_747__(class'AIActor', AI)
        {
            // End:0x58
            if(__NFUN_341__(AI.Tag, Event))
            {
                bFound = true;
                Script.RegisterPrecacheComponents(PrecacheIndex, AI);
            }            
        }        
    }
    return;
}

defaultproperties
{
    CollisionRadius=0
    CollisionHeight=0
    Texture='dt_editor.Icons.ScriptTrigger'
}